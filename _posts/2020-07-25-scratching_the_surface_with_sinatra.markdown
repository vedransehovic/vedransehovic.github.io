---
layout: post
title:      "Scratching the Surface With Sinatra"
date:       2020-07-25 13:37:46 -0400
permalink:  scratching_the_surface_with_sinatra
---


Writing this as I'm finishing Flatiron's Sinatra Project. It has been a frustrating project in many ways but also rewarding. 

I started the project full of enthusiasm; finally I'll be able to code something "real", something useful, something visible in medium other than command line. I even rushed through the material just so I can get started. I created a "warm up" project where I have modified a first project (API using CLI) to work on Sinatra and display results in the browser instead of CLI. It worked great and it was so quick! I knew the concept of code/database for designing websites for a long time but I never knew how to actually do it. How amazing!

For my actual project I decided to work on something based on real life. At the beginning of this pandemic, back in March, a friend asked me to help her set up a spreadsheet for managing runs/deliveries for a group of volunteers that were helping elderly and disabled persons during the quarantine. They were mostly delivering food and medicine to their homes. Setting up the spreadsheet was quick but it had it's obvious limitations: search-ability, extensibility, hard to differentiate data into logical sets (deliveries, volunteers, recipients) and present them in a constructive way. It was obvious that job was meant to be done in relational database. Now I did have some prior SQL experience, I felt confident I could have designed tables needed but user interface was a complete unknown. I even tried desktop GUI for MYSQL and even got it to work, with some difficulty, but that was impossible for my friend to use. I looked into paid versions like Airtable and Kintone but nothing seemed to fit the bill. It was either expensive, space limited, hard to use or some combination of prohibitive factors. 

So finally when I was given the tools to do what I wanted months ago, I jumped at the opportunity even though it would be just a proof of concept at this point. 

I already had database design done in my head, knew what tables I needed, knew I need 2 levels of users (regular users and admins) and knew that deliveries must belong to both volunteers and recipients. I also wanted to set up "has many through" relationship between recipients and volunteers for future possible statistical analysis. Deliveries would be my connecting table.

After that I started thinking about models, controllers, views, forms and flow of the application. All in my head before starting a line of code. Soon I started hitting a wall. I couldn't visualize how I'm going to get to the end, how I'm going to solve certain parts of the application. What if I have thousands of records? I have to be able to create deliveries to existing customers, can't be typing their name into a form every time. Just listing all customers will not be very functional I have to build some kind of search. Ideally I'd have something similar to Google's search that shows the results as you type. I researched that for a bit and found out that it's not possible to build that using Sinatra. AJAX seems to be way to do that. Meanwhile couple of days have passed and I still haven't started on my projects. I kept thinking of all the issues I'm going to encounter without knowing how to solve them. In my research JavaScript was a solution for a lot of my problems... only thing was... I don't know JavaScript! In the end I just decided to jump in and start coding. Core functionality I knew how to do, at least that should be enough to show my knowledge of database design, relationships, MVC design approach, Active Record and RESTful routes. 

After couple of days my project started to take shape, I even had rudimentary search, functional although not as neat as I would like it to be. After I was done with routes I decided to take a break and switch to design a bit. I utilized a bit of knowledge I had in CSS design to create a basic layout and make the whole thing look palatable. Even changed couple of fonts to free Google fonts, neat trick I picked up at the Flatiron's orientation session back in January. After I was done and happy with my CSS I happened to learn about Bootstrap from my cohort mate. How brilliant, I wish I knew about it before I styled my project. I'll definitely use it in the future. 

Going back to the hard parts of the project it was interesting how I was able to solve these issues I couldn't wrap my head around before. Definitely one thing I've learned is while doing this is not to try to complete the project in my head first but to sit down and start putting it down. Problems become easier and more in focus when you're directly facing them and not in some abstract "down the line" way. 

Last issue I had was with stateless(ness) of HTTP protocol. I built a helper method that checks if the user is logged in and redirects you to Login page if it is not. Problem was I wanted to redirect users to login page with the custom message and that didn't work through setting a variable. I've learned that there is a custom gem that does that but before I learned about that I've tried setting a message into a session, similarly as we're setting user ID when we're logging in users. That worked just fine and only thing I had to worry about is to reset the value once the message was displayed to avoid repeating it or displaying it out of place. 

In all it was a very interesting project. I learned a lot about Sinatra but also I've learned about new technologies I can't wait to try. I realized how Sinatra is so barely scratching a surface of things that are out there and now I'm eager to pass this exam and start learning again! Excellent!
